<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Iniciar sesión - Igualdad Visible</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="login.css">
  <style>
    /* Botón de volver */
    .btn-back {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 10px 20px;
      background-color: #7b1fa2;
      color: #ffffff;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 700;
      font-size: 0.9rem;
      border: none;
      cursor: pointer;
      z-index: 999;
      transition: background-color 0.3s ease, transform 0.2s ease;
      box-shadow: 0 5px 15px rgba(123, 31, 162, 0.3);
    }
    
    .btn-back:hover {
      background-color: #9c27b0;
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(123, 31, 162, 0.4);
    }
  </style>
</head>
<body>

  <!-- Botón de volver a página principal -->
  <a href="pagina.html" class="btn-back">← Volver</a>

  <div class="corner-image">
    <img src="./imagenes/Logo.png" alt="Logo">
  </div>

  <main class="hero">
    <section class="login-card" aria-labelledby="login-title">
      <h1 id="login-title" class="titulo" style="font-size:2rem; text-shadow:none;">Iniciar sesión</h1>

      <form id="loginForm" novalidate>
        <div class="field">
          <label for="email">Correo electrónico</label>
          <input id="email" name="email" type="email" placeholder="tucorreo@ejemplo.com" required autocomplete="email">
          <div class="error" id="emailError" aria-live="polite"></div>
        </div>

        <div class="field">
          <label for="password">Contraseña</label>
          <div class="password-wrap">
            <input id="password" name="password" type="password" placeholder="Contraseña" required autocomplete="current-password">
            <button type="button" id="togglePwd" class="toggle-btn" aria-label="Mostrar contraseña">=A</button>
          </div>
          <div class="error" id="passwordError" aria-live="polite"></div>
        </div>

        <div class="row">
          <label class="checkbox">
            <input type="checkbox" id="remember"> Recuérdame
          </label>
        </div>

        <div class="row">
          <button type="submit" class="boton-morado">Iniciar sesión</button>
        </div>

        <p class="muted" style="margin-top:12px;">Credenciales de ejemplo: <strong>equidad@visible.com</strong></p>
        <div id="formMessage" class="form-message" aria-live="polite"></div>
      </form>
    </section>
  </main>

<script>
  (function(){
    const demo = { email: 'demo@ejemplo.com', password: 'Demo1234' };

    const form = document.getElementById('loginForm');
    const email = document.getElementById('email');
    const password = document.getElementById('password');
    const emailError = document.getElementById('emailError');
    const passwordError = document.getElementById('passwordError');
    const formMessage = document.getElementById('formMessage');
    const toggle = document.getElementById('togglePwd');

    toggle.addEventListener('click', () => {
      const t = password.type === 'password' ? 'text' : 'password';
      password.type = t;
      toggle.setAttribute('aria-label', t === 'text' ? 'Ocultar contraseña' : 'Mostrar contraseña');
      toggle.textContent = t === 'text' ? '=H' : '=A';
    });

    function validate() {
      let ok = true;
      emailError.textContent = '';
      passwordError.textContent = '';
      formMessage.textContent = '';

      if (!email.value) { emailError.textContent = 'Ingrese su correo.'; ok = false; }
      else if (!/^\S+@\S+\.\S+$/.test(email.value)) { emailError.textContent = 'Correo inválido.'; ok = false; }

      if (!password.value) { passwordError.textContent = 'Ingrese su contraseña.'; ok = false; }
      else if (password.value.length < 6) { passwordError.textContent = 'La contraseña debe tener al menos 6 caracteres.'; ok = false; }

      return ok;
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      if (!validate()) return;

      // Simulación de autenticación (reemplazar por llamada a backend)
      if (email.value === demo.email && password.value === demo.password) {
        formMessage.style.color = '#b7f5c6';
        formMessage.textContent = 'Inicio de sesión correcto. Redirigiendo...';
        if (document.getElementById('remember').checked) {
          localStorage.setItem('authUser', email.value);
        } else {
          sessionStorage.setItem('authUser', email.value);
        }
        // pequeño retardo para que el usuario vea el mensaje
        setTimeout(() => {
          window.location.href = 'pagina.html';
        }, 900);
      } else {
        formMessage.style.color = '#ffd6d6';
        formMessage.textContent = 'Correo o contraseña incorrectos.';
      }
    });

    // Si ya está autenticado, redirigir (comodidad)
    if (localStorage.getItem('authUser') || sessionStorage.getItem('authUser')) {
      window.location.href = 'pagina.html';
    }
  })();
</script>

</body>
</html>